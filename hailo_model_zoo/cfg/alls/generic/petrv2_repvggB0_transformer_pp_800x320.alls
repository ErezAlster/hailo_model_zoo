model_optimization_flavor(optimization_level=0)
pre_quantization_optimization(matmul_equalization, layers=[matmul1,  matmul3, matmul5, matmul7, matmul9], policy=enabled, matmul_bias=enabled)
pre_quantization_optimization(equalization, policy=enabled)
pre_quantization_optimization(matmul_correction, layers={matmul*}, correction_type=zp_comp_block_3)
quantization_param(output_layer1, precision_mode=a16_w16)
quantization_param(output_layer2, precision_mode=a16_w16)
quantization_param(concat1, precision_mode=a16_w16)
quantization_param(conv41, precision_mode=a16_w16)

performance_param(compiler_optimization_level=1, optimize_for_batch=1)

remove_node(petrv2_repvggB0_transformer_pp_800x320/format_conversion1)
remove_node(petrv2_repvggB0_transformer_pp_800x320/format_conversion2)
placeholder = format_conversion(const_input1, ew_add1, spatial_reshape, 375, 8, collapse=True)
placeholder = format_conversion(const_input2, ew_add12, spatial_reshape, 38, 8, collapse=True)
placeholder = format_conversion(const_input3, matmul1, spatial_reshape, 38, 8, collapse=True)
placeholder = format_conversion(const_input4, conv8, spatial_reshape, 38, 8, collapse=True)
placeholder = format_conversion(const_input5, ew_add5, spatial_reshape, 38, 8, collapse=True)
placeholder = format_conversion(const_input6, ew_add10, spatial_reshape, 38, 8, collapse=True)
placeholder = format_conversion(const_input7, ew_add7, spatial_reshape, 38, 8, collapse=True)
tf_rgb_to_hailo_rgb_from_input_layer1_to_conv1 = format_conversion(input_layer1, conv1, tf_rgb_to_hailo_rgb)
placeholder = format_conversion(input_layer1, tf_rgb_to_hailo_rgb_from_input_layer1_to_conv1, spatial_reshape, 375, 8, collapse=True)
tf_rgb_to_hailo_rgb_from_input_layer2_to_ew_mult1 = format_conversion(input_layer2, ew_mult1, tf_rgb_to_hailo_rgb)
placeholder = format_conversion(input_layer2, tf_rgb_to_hailo_rgb_from_input_layer2_to_ew_mult1, spatial_reshape, 375, 8, collapse=True)
hailo_rgb_to_tf_rgb_from_concat1_to_output_layer1 = format_conversion(concat1, output_layer1, hailo_rgb_to_tf_rgb)
placeholder = format_conversion(hailo_rgb_to_tf_rgb_from_concat1_to_output_layer1, output_layer1, spatial_reshape, 1, 304, collapse=True)
hailo_rgb_to_tf_rgb_from_conv41_to_output_layer2 = format_conversion(conv41, output_layer2, hailo_rgb_to_tf_rgb)
placeholder = format_conversion(hailo_rgb_to_tf_rgb_from_conv41_to_output_layer2, output_layer2, spatial_reshape, 1, 304, collapse=True)


petrv2_repvggB0_transformer_pp_800x320/shortcut1 = shortcut(petrv2_repvggB0_transformer_pp_800x320/matmul1, [petrv2_repvggB0_transformer_pp_800x320/reduce_max_softmax1, petrv2_repvggB0_transformer_pp_800x320/ew_sub_softmax1])
petrv2_repvggB0_transformer_pp_800x320/shortcut5 = shortcut(petrv2_repvggB0_transformer_pp_800x320/matmul5, [petrv2_repvggB0_transformer_pp_800x320/reduce_max_softmax3, petrv2_repvggB0_transformer_pp_800x320/ew_sub_softmax3])
petrv2_repvggB0_transformer_pp_800x320/shortcut9 = shortcut(petrv2_repvggB0_transformer_pp_800x320/matmul9, [petrv2_repvggB0_transformer_pp_800x320/reduce_max_softmax5, petrv2_repvggB0_transformer_pp_800x320/ew_sub_softmax5])
{ petrv2_repvggB0_transformer_pp_800x320/matmul1: [petrv2_repvggB0_transformer_pp_800x320/matmul1_fs_0, petrv2_repvggB0_transformer_pp_800x320/matmul1_fs_1, petrv2_repvggB0_transformer_pp_800x320/matmul1_d0, petrv2_repvggB0_transformer_pp_800x320/matmul1_d1, petrv2_repvggB0_transformer_pp_800x320/matmul1_d2, petrv2_repvggB0_transformer_pp_800x320/matmul1_d3, petrv2_repvggB0_transformer_pp_800x320/matmul1_dc], petrv2_repvggB0_transformer_pp_800x320/matmul2: [petrv2_repvggB0_transformer_pp_800x320/matmul2_fs, petrv2_repvggB0_transformer_pp_800x320/matmul2_d0, petrv2_repvggB0_transformer_pp_800x320/matmul2_d1, petrv2_repvggB0_transformer_pp_800x320/matmul2_d2, petrv2_repvggB0_transformer_pp_800x320/matmul2_d3, petrv2_repvggB0_transformer_pp_800x320/matmul2_dc] } = defuse_block(petrv2_repvggB0_transformer_pp_800x320/matmul1, petrv2_repvggB0_transformer_pp_800x320/matmul2, petrv2_repvggB0_transformer_pp_800x320/ew_mult_softmax1, petrv2_repvggB0_transformer_pp_800x320/ew_sub_softmax1, petrv2_repvggB0_transformer_pp_800x320/ne_activation_ew_sub_softmax1, petrv2_repvggB0_transformer_pp_800x320/reduce_max_softmax1, petrv2_repvggB0_transformer_pp_800x320/reduce_sum_softmax1, defuse_count=4)
{ petrv2_repvggB0_transformer_pp_800x320/matmul5: [petrv2_repvggB0_transformer_pp_800x320/matmul5_fs_0, petrv2_repvggB0_transformer_pp_800x320/matmul5_fs_1, petrv2_repvggB0_transformer_pp_800x320/matmul5_d0, petrv2_repvggB0_transformer_pp_800x320/matmul5_d1, petrv2_repvggB0_transformer_pp_800x320/matmul5_d2, petrv2_repvggB0_transformer_pp_800x320/matmul5_d3, petrv2_repvggB0_transformer_pp_800x320/matmul5_dc], petrv2_repvggB0_transformer_pp_800x320/matmul6: [petrv2_repvggB0_transformer_pp_800x320/matmul6_fs, petrv2_repvggB0_transformer_pp_800x320/matmul6_d0, petrv2_repvggB0_transformer_pp_800x320/matmul6_d1, petrv2_repvggB0_transformer_pp_800x320/matmul6_d2, petrv2_repvggB0_transformer_pp_800x320/matmul6_d3, petrv2_repvggB0_transformer_pp_800x320/matmul6_dc] } = defuse_block(petrv2_repvggB0_transformer_pp_800x320/matmul5, petrv2_repvggB0_transformer_pp_800x320/matmul6, petrv2_repvggB0_transformer_pp_800x320/ew_mult_softmax3, petrv2_repvggB0_transformer_pp_800x320/ew_sub_softmax3, petrv2_repvggB0_transformer_pp_800x320/ne_activation_ew_sub_softmax3, petrv2_repvggB0_transformer_pp_800x320/reduce_max_softmax3, petrv2_repvggB0_transformer_pp_800x320/reduce_sum_softmax3, defuse_count=4)
{ petrv2_repvggB0_transformer_pp_800x320/matmul10: [petrv2_repvggB0_transformer_pp_800x320/matmul10_fs, petrv2_repvggB0_transformer_pp_800x320/matmul10_d0, petrv2_repvggB0_transformer_pp_800x320/matmul10_d1, petrv2_repvggB0_transformer_pp_800x320/matmul10_d2, petrv2_repvggB0_transformer_pp_800x320/matmul10_d3, petrv2_repvggB0_transformer_pp_800x320/matmul10_dc], petrv2_repvggB0_transformer_pp_800x320/matmul9: [petrv2_repvggB0_transformer_pp_800x320/matmul9_fs_0, petrv2_repvggB0_transformer_pp_800x320/matmul9_fs_1, petrv2_repvggB0_transformer_pp_800x320/matmul9_d0, petrv2_repvggB0_transformer_pp_800x320/matmul9_d1, petrv2_repvggB0_transformer_pp_800x320/matmul9_d2, petrv2_repvggB0_transformer_pp_800x320/matmul9_d3, petrv2_repvggB0_transformer_pp_800x320/matmul9_dc] } = defuse_block(petrv2_repvggB0_transformer_pp_800x320/matmul10, petrv2_repvggB0_transformer_pp_800x320/matmul9, petrv2_repvggB0_transformer_pp_800x320/ew_mult_softmax5, petrv2_repvggB0_transformer_pp_800x320/ew_sub_softmax5, petrv2_repvggB0_transformer_pp_800x320/ne_activation_ew_sub_softmax5, petrv2_repvggB0_transformer_pp_800x320/reduce_max_softmax5, petrv2_repvggB0_transformer_pp_800x320/reduce_sum_softmax5, defuse_count=4)

matmul2_d0_reshape = format_conversion(matmul2_fs, matmul2_d0, transpose_matmul)
matmul2_d1_reshape = format_conversion(matmul2_fs, matmul2_d1, transpose_matmul)
matmul2_d2_reshape = format_conversion(matmul2_fs, matmul2_d2, transpose_matmul)
matmul2_d3_reshape = format_conversion(matmul2_fs, matmul2_d3, transpose_matmul)


placeholder = format_conversion(conv11, matmul4, transpose_matmul, collapse=True)


matmul6_d0_reshape = format_conversion(matmul6_fs, matmul6_d0, transpose_matmul)
matmul6_d1_reshape = format_conversion(matmul6_fs, matmul6_d1, transpose_matmul)
matmul6_d2_reshape = format_conversion(matmul6_fs, matmul6_d2, transpose_matmul)
matmul6_d3_reshape = format_conversion(matmul6_fs, matmul6_d3, transpose_matmul)

placeholder = format_conversion(conv19, matmul8, transpose_matmul, collapse=True)

matmul10_d0_reshape = format_conversion(matmul10_fs, matmul10_d0, transpose_matmul)
matmul10_d1_reshape = format_conversion(matmul10_fs, matmul10_d1, transpose_matmul)
matmul10_d2_reshape = format_conversion(matmul10_fs, matmul10_d2, transpose_matmul)
matmul10_d3_reshape = format_conversion(matmul10_fs, matmul10_d3, transpose_matmul)
